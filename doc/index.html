<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf8" />
<title>File: README</title>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html" title="Index">Index</a> &raquo; 
    <span class="title">File: README</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><div id='filecontents'>
<h1>KO!</h1>

<p>This is KDD –Kickass Driven Development!</p>

<p>Knockout is a Ruby test framework that reads like a developer thinks. More
specifically, KO! is a test system created to breakdown the systems
analysis process into clear and obvious divisions. KO “specifications”
are divided-up into <b>cases</b>, <b>contexts</b>, <b>concerns</b>,
<b>tests</b>.</p>
<ul><li>
<p><b>Cases</b> delineate the overall requirement that is to be demonstrated.</p>
</li><li>
<p><b>Contexts</b> provide reusable procedures to setup and teardown test
fixtures.</p>
</li><li>
<p><b>Concerns</b> break-up test cases into separate areas of concern, i.e.
sub-cases.</p>
</li><li>
<p><b>Tests</b> compose the proof of a testcase as a set of assertions.</p>
</li></ul>

<p>KO! was inspired in part by the void left behind by the discontinuation of
Shoulda as a test framework. It seemed like an opportune time to implement
an elegant and light-weight test framework to serve as an alternative to
the monolithic RSpec.</p>

<h2>SYNOPSIS</h2>

<h3>Writing Kick-Ass Tests</h3>

<p>KO! tests, or specifications if you prefer, are … well, here’s an
example.</p>

<pre class="code"><span class='KO constant id'>KO</span><span class='dot token'>.</span><span class='case identifier id'>case</span> <span class='string val'>&quot;String Indexing&quot;</span> <span class='do do kw'>do</span>

  <span class='before identifier id'>before</span> <span class='do do kw'>do</span>
    <span class='@string ivar id'>@string</span> <span class='assign token'>=</span> <span class='string val'>&quot;Hello World&quot;</span>
  <span class='end end kw'>end</span>

  <span class='test identifier id'>test</span> <span class='string val'>&quot;index by substring&quot;</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='substring identifier id'>substring</span><span class='comma token'>,</span> <span class='index identifier id'>index</span><span class='bitor op'>|</span>
    <span class='@string ivar id'>@string</span><span class='dot token'>.</span><span class='index identifier id'>index</span><span class='lparen token'>(</span><span class='substring identifier id'>substring</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='index identifier id'>index</span>
  <span class='end end kw'>end</span>

  <span class='ok identifier id'>ok</span> <span class='string val'>'H'</span> <span class='comma token'>,</span> <span class='integer val'>0</span>
  <span class='ok identifier id'>ok</span> <span class='string val'>'l'</span> <span class='comma token'>,</span> <span class='integer val'>2</span>
  <span class='ok identifier id'>ok</span> <span class='string val'>'ld'</span><span class='comma token'>,</span> <span class='integer val'>9</span>

  <span class='test identifier id'>test</span> <span class='string val'>&quot;index by regular expression&quot;</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='regular_expression identifier id'>regular_expression</span><span class='comma token'>,</span> <span class='index identifier id'>index</span><span class='bitor op'>|</span>
    <span class='@string ivar id'>@string</span><span class='dot token'>.</span><span class='index identifier id'>index</span><span class='lparen token'>(</span><span class='regular_expression identifier id'>regular_expression</span><span class='comma token'>,</span> <span class='index identifier id'>index</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='ok identifier id'>ok</span> <span class='regexp val'>/H/</span>  <span class='comma token'>,</span> <span class='integer val'>0</span>
  <span class='ok identifier id'>ok</span> <span class='regexp val'>/l/</span>  <span class='comma token'>,</span> <span class='integer val'>2</span>
  <span class='ok identifier id'>ok</span> <span class='regexp val'>/o\ /</span><span class='comma token'>,</span> <span class='integer val'>4</span>

<span class='end end kw'>end</span>
</pre>

<p>It should be pretty clear how this plays out just by looking at it. When KO
runs a test case it runs each <tt>test</tt>, which consists of trying each
<tt>ok</tt> assertion. These are run through the test procedure, if the
result of which evaluates as true then the test passes.</p>

<p>KO! handles assertions in a rather unique way. As shown, only truth of the
test can be asserted. But since equality (==) is by far the most common
means of test validation, KO! offers an alternative notation for specifying
the `ok` expectation using `=&gt;`. For example, the above example can also
be written as follows.</p>

<pre class="code"><span class='KO constant id'>KO</span><span class='dot token'>.</span><span class='case identifier id'>case</span> <span class='string val'>&quot;String Indexing&quot;</span> <span class='do do kw'>do</span>

  <span class='before identifier id'>before</span> <span class='do do kw'>do</span>
    <span class='@string ivar id'>@string</span> <span class='assign token'>=</span> <span class='string val'>&quot;Hello World&quot;</span>
  <span class='end end kw'>end</span>

  <span class='test identifier id'>test</span> <span class='string val'>&quot;index by substring&quot;</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='substring identifier id'>substring</span><span class='bitor op'>|</span>
    <span class='@string ivar id'>@string</span><span class='dot token'>.</span><span class='index identifier id'>index</span><span class='lparen token'>(</span><span class='substring identifier id'>substring</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='ok identifier id'>ok</span> <span class='string val'>'H'</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='ok identifier id'>ok</span> <span class='string val'>'l'</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>2</span>
  <span class='ok identifier id'>ok</span> <span class='string val'>'ld'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>9</span>

  <span class='test identifier id'>test</span> <span class='string val'>&quot;index by regular expression&quot;</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='regular_expression identifier id'>regular_expression</span><span class='bitor op'>|</span>
    <span class='@string ivar id'>@string</span><span class='dot token'>.</span><span class='index identifier id'>index</span><span class='lparen token'>(</span><span class='regular_expression identifier id'>regular_expression</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='ok identifier id'>ok</span> <span class='regexp val'>/H/</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>0</span>
  <span class='ok identifier id'>ok</span> <span class='regexp val'>/l/</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>2</span>
  <span class='ok identifier id'>ok</span> <span class='regexp val'>/o\ /</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>4</span>

<span class='end end kw'>end</span>
</pre>

<p>Taking this one step further the validation routine can be overridden as
well. Consider the next example.</p>

<pre class="code"><span class='KO constant id'>KO</span><span class='dot token'>.</span><span class='case identifier id'>case</span> <span class='string val'>&quot;Calculator Addition&quot;</span> <span class='do do kw'>do</span>

  <span class='before identifier id'>before</span> <span class='symbol val'>:all</span> <span class='do do kw'>do</span>
    <span class='require identifier id'>require</span> <span class='string val'>'calculator'</span>
    <span class='@calculator ivar id'>@calculator</span> <span class='assign token'>=</span> <span class='Calculator constant id'>Calculator</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='end end kw'>end</span>

  <span class='test identifier id'>test</span> <span class='string val'>&quot;a Calculator can add two numbers&quot;</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='input1 identifier id'>input1</span><span class='comma token'>,</span> <span class='input2 identifier id'>input2</span><span class='bitor op'>|</span>
    <span class='@calculator ivar id'>@calculator</span><span class='dot token'>.</span><span class='push identifier id'>push</span> <span class='input1 identifier id'>input1</span>
    <span class='@calculator ivar id'>@calculator</span><span class='dot token'>.</span><span class='push identifier id'>push</span> <span class='input2 identifier id'>input2</span>
    <span class='@calculator ivar id'>@calculator</span><span class='dot token'>.</span><span class='add identifier id'>add</span>
    <span class='@calculator ivar id'>@calculator</span>
  <span class='end end kw'>end</span>

  <span class='valid identifier id'>valid</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='calculator identifier id'>calculator</span><span class='comma token'>,</span> <span class='expect identifier id'>expect</span><span class='bitor op'>|</span>
    <span class='@calculator ivar id'>@calculator</span><span class='dot token'>.</span><span class='output identifier id'>output</span> <span class='eq op'>==</span> <span class='expect identifier id'>expect</span>
  <span class='end end kw'>end</span>

  <span class='ok identifier id'>ok</span> <span class='lbrack token'>[</span><span class='integer val'>2</span><span class='comma token'>,</span> <span class='integer val'>2</span><span class='rbrack token'>]</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>4</span>
  <span class='ok identifier id'>ok</span> <span class='lbrack token'>[</span><span class='integer val'>2</span><span class='comma token'>,</span> <span class='integer val'>1</span><span class='rbrack token'>]</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>3</span>
  <span class='ok identifier id'>ok</span> <span class='lbrack token'>[</span><span class='integer val'>2</span><span class='comma token'>,</span> <span class='integer val'>0</span><span class='rbrack token'>]</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>2</span>

<span class='end end kw'>end</span>
</pre>

<h3>Reusable Contexts</h3>

<p>KO! has a nice feature for creating reusable contexts. They can be defined 
outside of any testcase and then called upon by their description for use
in any testcase.</p>

<pre class="code"><span class='KO constant id'>KO</span><span class='dot token'>.</span><span class='context identifier id'>context</span> <span class='string val'>&quot;String Instance&quot;</span> <span class='do do kw'>do</span>

  <span class='before identifier id'>before</span> <span class='symbol val'>:all</span> <span class='do do kw'>do</span>
    <span class='@string ivar id'>@string</span> <span class='assign token'>=</span> <span class='string val'>&quot;Hello World&quot;</span>
  <span class='end end kw'>end</span>

<span class='end end kw'>end</span>

<span class='KO constant id'>KO</span><span class='dot token'>.</span><span class='case identifier id'>case</span> <span class='string val'>&quot;String Indexing&quot;</span> <span class='do do kw'>do</span>

  <span class='use identifier id'>use</span> <span class='string val'>&quot;String Instance&quot;</span>

  <span class='test identifier id'>test</span> <span class='string val'>&quot;index by substring&quot;</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='substring identifier id'>substring</span><span class='bitor op'>|</span>
    <span class='@string ivar id'>@string</span><span class='dot token'>.</span><span class='index identifier id'>index</span><span class='lparen token'>(</span><span class='substring identifier id'>substring</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='dot3 op'>...</span>
</pre>

<p>Get it? You create a reusable contexts –they can load libraries, build
out mocks, setup fixtures, etc. Then use <tt>use</tt> to use them in your
testcases.</p>

<p>Of course, generally you won’t define the contexts in the same file with
the testcase. You will put those in separate files in a context directory
where all your tests have access to them.</p>

<h3>Running Tests</h3>

<p>Running KO! scripts is like this.</p>

<pre class="code">$ <span class='ko identifier id'>ko</span> <span class='minus op'>-</span><span class='Ilib constant id'>Ilib</span> <span class='path identifier id'>path</span><span class='div op'>/</span><span class='to identifier id'>to</span><span class='div op'>/</span><span class='tests identifier id'>tests</span><span class='div op'>/</span><span class='mult op'>*</span><span class='dot token'>.</span><span class='rb identifier id'>rb</span>
</pre>

<h2>LICENSE</h2>

<p>Copyright © 2010 Thomas Sawyer</p>

<p>Licensed under the Apache License, Version 2.0 (the “License”); you may
not use this file except in compliance with the License. You may obtain a
copy of the License at</p>

<pre class="code"><span class='http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/www.apache.org/</span><span class='licenses identifier id'>licenses</span><span class='div op'>/</span><span class='LICENSE constant id'>LICENSE</span><span class='minus op'>-</span><span class='float val'>2.0</span>
</pre>

<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
</div></div>
    
    <div id="footer">
  Generated on Sat May 21 22:47:27 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.7 (ruby-1.8.7).
</div>

  </body>
</html>